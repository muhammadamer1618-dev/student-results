<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>نظام الشهادات</title>

<style>
    body {font-family: Arial; margin:0; background:#f7f7f7;}
    header {background:#1769aa; color:white; padding:15px; text-align:center; font-size:22px;}
    .container {padding:20px;}
    input, button {width:100%; padding:12px; margin:10px 0; font-size:18px; border-radius:6px;}
    button {background:#1769aa; color:white; border:none; cursor:pointer;}
    .card {background:white; padding:15px; border-radius:8px; margin-top:15px; border:1px solid #ccc;}
    .row {margin:8px 0; font-size:18px;}
    .label {font-weight:bold;}
</style>

</head>
<body>

<header>مدرسة الفلاح الأهليه</header>

<div class="container">

    <!-- شاشة اختيار -->
    <div id="home">
        <button onclick="goTo('login')">دخول المشرف</button>
        <button onclick="goTo('student')">شهادة الطالب</button>
    </div>

    <!-- شاشة الدخول -->
    <div id="login" style="display:none;">
        <h3>تسجيل دخول المشرف</h3>
        <input type="password" id="adminPass" placeholder="اكتب كلمة المرور">
        <button onclick="adminLogin()">دخول</button>
        <button onclick="goTo('home')">رجوع</button>
    </div>

    <!-- شاشة المشرف -->
    <div id="admin" style="display:none;">
        <h3>لوحة المشرف</h3>
        <input id="code" placeholder="كود الطالب">
        <input id="name" placeholder="اسم الطالب">
        <input id="stage" placeholder="المرحلة">
        <input id="grade" placeholder="الصف">
        <input id="subject" placeholder="المادة">
        <input id="fullMark" placeholder="الدرجة النهائية">
        <input id="mark" placeholder="درجة الطالب">
        <input id="teacher" placeholder="اسم المعلم">
        <input id="supervisor" placeholder="اسم المشرف">
        <button onclick="saveStudent()">حفظ</button>
        <button onclick="goTo('home')">رجوع</button>
    </div>

    <!-- شاشة الطالب -->
    <div id="student" style="display:none;">
        <h3>شهادة الطالب</h3>
        <input id="searchCode" placeholder="ادخل كود الطالب">
        <button onclick="showResult()">عرض الشهادة</button>
        <button onclick="goTo('home')">رجوع</button>

        <div id="result" class="card" style="display:none;">
            <div class="row"><span class="label">كود الطالب:</span> <span id="r_code"></span></div>
            <div class="row"><span class="label">اسم الطالب:</span> <span id="r_name"></span></div>
            <div class="row"><span class="label">المرحلة:</span> <span id="r_stage"></span></div>
            <div class="row"><span class="label">الصف:</span> <span id="r_grade"></span></div>
            <div class="row"><span class="label">المادة:</span> <span id="r_subject"></span></div>
            <div class="row"><span class="label">الدرجة النهائية:</span> <span id="r_fullMark"></span></div>
            <div class="row"><span class="label">درجة الطالب:</span> <span id="r_mark"></span></div>
            <div class="row"><span class="label">اسم المعلم:</span> <span id="r_teacher"></span></div>
            <div class="row"><span class="label">اسم المشرف:</span> <span id="r_supervisor"></span></div>
        </div>
    </div>

</div>

<script>
function goTo(page){
    document.getElementById("home").style.display = "none";
    document.getElementById("login").style.display = "none";
    document.getElementById("admin").style.display = "none";
    document.getElementById("student").style.display = "none";

    document.getElementById(page).style.display = "block";
}

function adminLogin(){
    let pass = document.getElementById("adminPass").value;
    if(pass === "010096"){
        goTo("admin");
    } else {
        alert("خطأ في كلمة المرور");
    }
}

function saveStudent(){
    let code = document.getElementById("code").value.trim();
    if(code === ""){ alert("ضع كود للطالب"); return; }

    let data = {
        name: document.getElementById("name").value,
        stage: document.getElementById("stage").value,
        grade: document.getElementById("grade").value,
        subject: document.getElementById("subject").value,
        fullMark: document.getElementById("fullMark").value,
        mark: document.getElementById("mark").value,
        teacher: document.getElementById("teacher").value,
        supervisor: document.getElementById("supervisor").value
    };

    let all = localStorage.getItem("students");
    all = all ? JSON.parse(all) : {};
    all[code] = data;
    localStorage.setItem("students", JSON.stringify(all));

    alert("تم حفظ بيانات الطالب");
}

function showResult(){
    let code = document.getElementById("searchCode").value.trim();
    let all = localStorage.getItem("students");
    if(!all){ alert("لا توجد بيانات بعد"); return; }

    all = JSON.parse(all);
    if(!all[code]){ alert("لا يوجد طالب بهذا الكود"); return; }

    let d = all[code];

    document.getElementById("result").style.display = "block";
    document.getElementById("r_code").innerText = code;
    document.getElementById("r_name").innerText = d.name;
    document.getElementById("r_stage").innerText = d.stage;
    document.getElementById("r_grade").innerText = d.grade;
    document.getElementById("r_subject").innerText = d.subject;
    document.getElementById("r_fullMark").innerText = d.fullMark;
    document.getElementById("r_mark").innerText = d.mark;
    document.getElementById("r_teacher").innerText = d.teacher;
    document.getElementById("r_supervisor").innerText = d.supervisor;
}
</script>

</body>
</html>
