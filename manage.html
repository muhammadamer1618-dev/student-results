
<!DOCTYPE html><html lang='ar' dir='rtl'><head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<title>إدارة الطلاب</title><link href='https://fonts.googleapis.com/css2?family=Calibri:wght@400;700&display=swap' rel='stylesheet'>
<style>
body{font-family:Calibri;background:#f2f6fa;margin:0}
header{background:#1976d2;color:white;padding:20px;text-align:center;font-size:24px}
.container{padding:25px}
.search{width:100%;padding:15px;font-size:18px;border-radius:8px;border:1px solid #999;margin-bottom:15px}
.card{background:white;padding:15px;border-radius:10px;border:1px solid #ccc;margin-bottom:15px}
.name{font-size:20px;color:#1565c0;font-weight:bold}
.label{color:#c62828}
.value{color:#1565c0}
button{padding:10px 15px;border:none;border-radius:6px;margin:4px;font-size:16px}
.edit{background:#0288d1;color:white}
.delete{background:#d32f2f;color:white}
</style></head><body>

<header>إدارة الطلاب</header>
<div class='container'>
<input id='search' class='search' placeholder='ابحث بالاسم أو الكود' oninput='load()'>
<div id='list'></div>
<button style='width:100%;padding:16px;background:#1976d2;color:white;border:none;border-radius:8px;font-size:18px' onclick="location='admin.html'">رجوع</button>
</div>

<script>
function load(){
 let all=localStorage.getItem('students');
 let area=list;
 area.innerHTML="";
 if(!all) return area.innerHTML="لا يوجد طلاب";

 all=JSON.parse(all);
 let q=search.value.trim();

 let f=Object.keys(all).filter(c=>c.includes(q)||all[c].name.includes(q));

 f.forEach(code=>{
   let s=all[code];
   area.innerHTML+=`
   <div class='card'>
     <div class='name'>${s.name}</div>
     <div><span class='label'>الكود:</span> <span class='value'>${code}</span></div>
     <div><span class='label'>الصف:</span> <span class='value'>${s.grade}</span></div>
     <button class='edit' onclick="edit('${code}')">تعديل</button>
     <button class='delete' onclick="del('${code}')">حذف</button>
   </div>`;
 });
}

function edit(c){
 let a=JSON.parse(localStorage.getItem('students'));
 localStorage.setItem('editStudent',JSON.stringify({code:c,data:a[c]}));
 location='admin.html';
}

function del(c){
 if(confirm("تأكيد الحذف؟")){
   let a=JSON.parse(localStorage.getItem('students'));
   delete a[c];
   localStorage.setItem('students',JSON.stringify(a));
   load();
 }
}

load();
</script>
</body></html>
