<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>شهادة الطالب</title>

<link href='https://fonts.googleapis.com/css2?family=Calibri:wght@400;700&display=swap' rel='stylesheet'>

<style>
body{
    font-family: Calibri;
    background:#f6f6f6;
    margin:0;
    padding:25px;
}

table{
    width:100%;
    border-collapse:collapse;
    margin-top:20px;
    font-size:22px;
}

td{
    border:1px solid #000;
    padding:10px;
}

.label{
    color:#d32f2f;
    font-weight:bold;
    width:30%;
    text-align:center;
}

.value{
    color:#1565c0;
    font-weight:bold;
    text-align:center;
}

.title{
    text-align:center;
    font-size:26px;
    color:#d32f2f;
    font-weight:bold;
    padding:10px;
    border:1px solid #000;
    margin-bottom:0;
}

.btn{
    width:100%;
    padding:15px;
    border:none;
    border-radius:8px;
    font-size:18px;
    margin-bottom:10px;
}

.view{background:#1976d2;color:white;}
.print{background:#388e3c;color:white;}
.back{background:#777;color:white;}

@media print{
    .btn, #code{display:none}
    body{padding:0;background:white}
}
</style>
</head>

<body>

<input id="code" placeholder="ادخل كود الطالب" class="btn" style="border:1px solid #999">
<button onclick="loadData()" class="btn view">عرض</button>
<button onclick="window.print()" class="btn print">طباعة</button>
<button onclick="location='index.html'" class="btn back">رجوع</button>

<div id="cert" style="display:none">

<!-- العنوان -->
<div class="title">شهادة درجات مادة اللغة الإنجليزية</div>

<!-- الجدول الأساسي -->
<table>
<tr>
    <td class="label">اسم الطالب</td>
    <td class="value" id="student_name"></td>
</tr>
<tr>
    <td class="label">الصف</td>
    <td class="value" id="grade"></td>
</tr>
<tr>
    <td class="label">اختبار</td>
    <td class="value">—</td>
</tr>
<tr>
    <td class="label">الدرجة النهائية</td>
    <td class="value" id="fullMark"></td>
</tr>
<tr>
    <td class="label">درجة الطالب</td>
    <td class="value" id="mark"></td>
</tr>
<tr>
    <td class="label">التقدير</td>
    <td class="value" id="rating"></td>
</tr>
</table>

<!-- جدول التواقيع -->
<table>
<tr>
    <td class="label">معلم المادة</td>
    <td class="label">مشرف المادة</td>
    <td class="label">رئيس قسم الإشراف</td>
    <td class="label">مدير المدرسة</td>
</tr>
<tr>
    <td class="value" id="teacher_fixed"></td>
    <td class="value">محمد عامر أحمد</td>
    <td class="value">أحمد سمير عباس</td>
    <td class="value">سعيد بن علي الجمعان</td>
</tr>
</table>

</div>

<script>
function calcRating(mark, full){
    let p = (mark / full) * 100;
    if(p >= 90) return "ممتاز";
    if(p >= 80) return "جيد جدًا";
    if(p >= 70) return "جيد";
    if(p >= 60) return "مقبول";
    return "ضعيف";
}

function loadData(){
    let code = document.getElementById("code").value.trim();
    let all = localStorage.getItem("students");

    if(!all){ alert("لا توجد بيانات"); return; }

    all = JSON.parse(all);

    if(!all[code]){ alert("لا يوجد طالب بهذا الكود"); return; }

    let st = all[code];

    document.getElementById("cert").style.display = "block";

    document.getElementById("student_name").innerText = st.name;
    document.getElementById("grade").innerText = st.grade;
    document.getElementById("fullMark").innerText = st.fullMark;
    document.getElementById("mark").innerText = st.mark;

    document.getElementById("teacher_fixed").innerText = st.teacher;

    // التقدير
    document.getElementById("rating").innerText =
        calcRating(Number(st.mark), Number(st.fullMark));
}
</script>

</body>
</html>
